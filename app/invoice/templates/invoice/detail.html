{% extends 'bank_statement/base.html' %}

{% block content %}
<div class="container mt-4">
  <h3>Invoice #{{ invoice.id }}</h3>
  <p><strong>Merchant:</strong> {{ invoice.merchant_name|default:'—' }}</p>
  <p><strong>Date:</strong> {{ invoice.invoice_date|date:'Y-m-d H:i' }}</p>
  <p><strong>Total:</strong> {{ invoice.total_amount|default:'—' }}</p>
  <p><strong>Subtotal:</strong> {{ invoice.subtotal|default:'—' }} | <strong>Tax:</strong> {{ invoice.tax_amount|default:'—' }}</p>

  <h5 class="mt-4">Lines</h5>
  <table class="table table-sm">
    <thead>
      <tr><th>#</th><th>Description</th><th class="text-end">Qty</th><th class="text-end">Price</th><th class="text-end">Total</th></tr>
    </thead>
    <tbody>
      {% for line in invoice.lines.all %}
      <tr>
        <td>{{ line.position }}</td>
        <td>{{ line.description }}</td>
        <td class="text-end">{{ line.quantity }}</td>
        <td class="text-end">{{ line.unit_price }}</td>
        <td class="text-end">{{ line.line_total }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="5" class="text-center text-muted">No lines parsed</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <h6 class="mt-4">Raw Text</h6>
  <pre class="bg-light p-2">{{ invoice.raw_text }}</pre>
</div>
{% endblock %}

